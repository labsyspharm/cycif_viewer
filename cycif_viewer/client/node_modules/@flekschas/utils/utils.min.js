!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n=n||self).utils={})}(this,(function(n){"use strict";var t=function(n,t,r){return n*(1-(r=Math.min(1,Math.max(0,r))))+t*r};function r(n){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function e(n,t){for(var r in t){(u=t[r]).configurable=u.enumerable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,r,u)}if(Object.getOwnPropertySymbols)for(var e=Object.getOwnPropertySymbols(t),o=0;o<e.length;o++){var u,i=e[o];(u=t[i]).configurable=u.enumerable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,i,u)}return n}function o(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function u(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){if(!(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n)))return;var r=[],e=!0,o=!1,u=void 0;try{for(var i,c=n[Symbol.iterator]();!(e=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);e=!0);}catch(n){o=!0,u=n}finally{try{e||null==c.return||c.return()}finally{if(o)throw u}}return r}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(n){return function(n){if(Array.isArray(n)){for(var t=0,r=new Array(n.length);t<n.length;t++)r[t]=n[t];return r}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var c=function(n){return n},a=Array.isArray,f=function(n){return!!(n&&n.constructor&&n.call&&n.apply)},s=function(n){return/(^#[0-9A-Fa-f]{6}$)|(^#[0-9A-Fa-f]{3}$)/i.test(n)},l=function(n){return p(n)&&n>=0&&n<=1},d=function(n){return Array.isArray(n)&&n.every(l)},p=function(n){return"number"==typeof n},h=function(n){return 3===n.length&&(d(n)||y(n))},v=function(n){return 4===n.length&&(d(n)||y(n)||y(n.slice(0,3))&&l(n[3]))},m=function(n){return Number.isInteger(n)&&n>=0&&n<=255},y=function(n){return Array.isArray(n)&&n.every(m)},g=function(n){return Math.sqrt(n.reduce((function(n,t){return n+Math.pow(t,2)}),0))},b=function(n){return n.reduce((function(n,t){return t>n?t:n}),-1/0)},w=b,A=function(n){return n[Math.floor(n.length/2)]},M=A,O=function(n){return n.reduce((function(n,t){return t<n?t:n}),1/0)},j=O,x=function(n){var t=g(n);return n.map((function(n){return n/t}))},P=function(n){return n.reduce((function(n,t){return t?n+t:n}),0)},R=P,S=function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(n,t,r,e){return"#".concat(t).concat(t).concat(r).concat(r).concat(e).concat(e)})).substring(1).match(/.{2}/g).map((function(n){return parseInt(n,16)/Math.pow(255,t)}))},T=function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return[].concat(i(S(n,t)),[Math.pow(255,!t)])},N=function(n){return n.match(/[\d.]+/g).slice(0,4).map((function(n){return+n}))},D=N,I="http://www.w3.org/2000/svg",C=function(n,t){if(n.namespaceURI===I){var r=n.getAttribute("class");return r&&!!r.match(new RegExp("(\\s|^)".concat(t,"(\\s|$)")))}return n.classList?n.classList.contains(t):!!n.className.match(new RegExp("(\\s|^)".concat(t,"(\\s|$)")))},E=function(n){var t=new n.constructor(n.type,n);return t.sourceUid=n.sourceUid,t.forwarded=n.forwarded,t},q=function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),e=1;e<t;e++)r[e-1]=arguments[e];return r.forEach((function(t){var r=Object.keys(t).reduce((function(n,r){return n[r]=Object.getOwnPropertyDescriptor(t,r),n}),{});Object.getOwnPropertySymbols(t).forEach((function(n){var e=Object.getOwnPropertyDescriptor(t,n);e.enumerable&&(r[n]=e)})),Object.defineProperties(n,r)})),n},F=function n(t,e){if(null===e||"object"!==r(e))return e;if(e.constructor!==Object&&e.constructor!==Array)return e;if(e.constructor===Date||e.constructor===RegExp||e.constructor===Function||e.constructor===String||e.constructor===Number||e.constructor===Boolean)return new e.constructor(e);var o=t||new e.constructor;return Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);void 0===o[t]&&(void 0===r.value?Object.defineProperty(o,t,r):o[t]=n(void 0,e[t]))})),o},L=function(n){return"".concat(n[0].toUpperCase()).concat(n.substr(1))},U=function(n,t){return n-t};n.addClass=function(n,t){if(n.namespaceURI===I){if(!C(n,t)){var r=n.getAttribute("class")||"";n.setAttribute("class","".concat(r," ").concat(t))}}else n.classList?n.classList.add(t):C(n,t)||(n.className+=" ".concat(t))},n.aggregate=function(n,t,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e.getter,u=void 0===o?c:o,i=f(t),a=i?[t]:t,s=i?[r]:r,l=n.reduce((function(n,t){return a.map((function(r,e){return r(n[e],u(t))}))}),void 0===s?Array(a.length).fill(0):s);return i?l[0]:l},n.argSort=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getter,e=void 0===r?c:r,o=t.comparator,u=void 0===o?U:o,i=t.ignoreNull,a=void 0!==i&&i;return n.map(a?function(n,t){return null===e(n)?void 0:[e(n),t]}:function(n,t){return[e(n),t]}).sort((function(n,t){return u(n[0],t[0])})).reduce((function(n,t){return t?(n.push(t[1]),n):n}),[])},n.array2dTranspose=function(n){for(var t=i(new Array(n[0].length).fill().map((function(){return[]}))),r=0;r<n.length;r++)for(var e=0;e<n[r].length;e++)t[e][r]=n[r][e];return t},n.assign=q,n.camelToConst=function(n){return n.split(/(?=[A-Z])/).join("_").toUpperCase()},n.capitalize=L,n.clearArray=function(n){return n.splice(0,n.length),n},n.cloneEvent=E,n.createHtmlByTemplate=function(n){var t=document.createElement("div");return t.insertAdjacentHTML("beforeend",n),t.firstChild},n.createWorker=function(n){return new Worker(window.URL.createObjectURL(new Blob(["(".concat(n.toString(),")()")],{type:"text/javascript"})))},n.cubicIn=function(n){return n*n*n},n.cubicInOut=function(n){return n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1},n.cubicOut=function(n){return--n*n*n+1},n.debounce=function(n,t){var r,e=function(){for(var e=arguments.length,o=new Array(e),u=0;u<e;u++)o[u]=arguments[u];var i=function(){r=null,n.apply(void 0,o)};clearTimeout(r),r=setTimeout(i,t)};return e.cancel=function(){clearTimeout(r)},e.now=function(){return n.apply(void 0,arguments)},e},n.decToRgb=function(n){return[n>>16,(n>>8)%256,n%256]},n.deepClone=function(n){return F(void 0,n)},n.diff=function(n,t){return n.map((function(n,r){return n-t[r]}))},n.extend=F,n.forEach=function(n){return function(t){return Array.prototype.forEach.call(t,n)}},n.forwardEvent=function(n,t){t.dispatchEvent(E(n))},n.hasClass=C,n.hexToDec=function(n){return parseInt(n.substr(1),16)},n.hexToRgbArray=S,n.hexToRgbaArray=T,n.identity=c,n.interpolateNumber=t,n.interpolateVector=function(n,r,e){return n.map((function(n,o){return t(n,r[o],e)}))},n.isArray=a,n.isClose=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;return Math.abs(n-t)<Math.pow(10,-r)},n.isFunction=f,n.isHex=s,n.isNormFloat=l,n.isNormFloatArray=d,n.isNumber=p,n.isObject=function(n){return!!n&&n.constructor===Object},n.isParentOf=function(n,t){for(var r=n;r&&r!==t&&"HTML"!==r.tagName;)r=r.parentNode;return r===t},n.isPointHalfwayInRect=function(n,t){var r=u(n,2),e=r[0],o=r[1],i=u(t,4),c=i[0],a=i[1],f=i[2],s=i[3];return e>=c&&e<=a||o>=f&&o<=s},n.isPointInPolygon=function(){for(var n,t,r,e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=u(o,2),c=i[0],a=i[1],f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=!1,l=0,d=f.length-2;l<f.length;l+=2)n=f[l],t=f[l+1],r=f[d],t>a!=(e=f[d+1])>a&&c<(r-n)*(a-t)/(e-t)+n&&(s=!s),d=l;return s},n.isPointInRect=function(n,t){var r=u(n,2),e=r[0],o=r[1],i=u(t,4),c=i[0],a=i[1],f=i[2],s=i[3];return e>=c&&e<=a&&o>=f&&o<=s},n.isRgbArray=h,n.isRgbStr=function(n){return/rgb\(\s*[\d.]+\s*,\s*[\d.]+\s*,\s*[\d.]+\s*\)/i.test(n)},n.isRgbaArray=v,n.isRgbaStr=function(n){return/rgba\(\s*[\d.]+\s*,\s*[\d.]+\s*,\s*[\d.]+\s*,\s*[\d.]+\s*\)/i.test(n)},n.isString=function(n){return"string"==typeof n||n instanceof String},n.isUint8=m,n.isUint8Array=y,n.iteratorToArray=function(n){var t=[],r=!0,e=!1,o=void 0;try{for(var u,i=n[Symbol.iterator]();!(r=(u=i.next()).done);r=!0){var c=u.value;t.push(c)}}catch(n){e=!0,o=n}finally{try{r||null==i.return||i.return()}finally{if(e)throw o}}return t},n.l1Dist=function(n,t){return n.length===t.length?n.reduce((function(n,r,e){return n+Math.abs(r-t[e])}),0):void 0},n.l1DistByDim=function(n){var t=Array(n).fill().map((function(n,t){return"s += Math.abs(v[".concat(t,"] - w[").concat(t,"]);")})).join(" ");return new Function("v","w","let s = 0; ".concat(t," return s;"))},n.l1PointDist=function(n,t,r,e){return Math.abs(n-r)+Math.abs(t-e)},n.l2Dist=function(n,t){return n.length===t.length?Math.sqrt(n.reduce((function(n,r,e){return n+Math.pow(r-t[e],2)}),0)):void 0},n.l2DistByDim=function(n){var t=Array(n).fill().map((function(n,t){return"s += Math.pow(v[".concat(t,"] - w[").concat(t,"], 2);")})).join(" ");return new Function("v","w","let s = 0; ".concat(t," return Math.sqrt(s);"))},n.l2Norm=g,n.l2PointDist=function(n,t,r,e){return Math.sqrt(Math.pow(n-r,2)+Math.pow(t-e,2))},n.lDist=function(n,t){if(Number.isNaN(+t))return function(t,r){return t.length===r.length?Math.pow(t.reduce((function(t,e,o){return t+Math.pow(Math.abs(e-r[o]),n)}),0),1/n):void 0};var r=Array(t).fill().map((function(n,t){return"s += Math.abs(v[".concat(t,"] - w[").concat(t,"]) ** l;")})).join(" ");return new Function("v","w","const l = ".concat(n,"; let s = 0; ").concat(r," return s ** (1 / l);"))},n.lPointDist=function(n){return function(t,r,e,o){return Math.pow(Math.pow(Math.abs(t-e),n)+Math.pow(Math.abs(r-o),n),1/n)}},n.lRectDist=function(n){return function(t,r){var e=r.minX-t.minX,o=r.minX-t.maxX,u=r.maxX-t.minX,i=r.maxX-t.maxX,c=e<0&&u>0||o<0&&i>0||e>0&&o<0||u>0&&i<0,a=r.minY-t.minY,f=r.minY-t.maxY,s=r.maxY-t.minY,l=r.maxY-t.maxY,d=a<0&&s>0||f<0&&l>0||a>0&&f<0||s>0&&l<0;if(c&&d)return 0;var p=Math.min(Math.abs(a),Math.abs(f),Math.abs(s),Math.abs(l));if(c)return p;var h=Math.min(Math.abs(e),Math.abs(o),Math.abs(u),Math.abs(i));return d?h:Math.pow(Math.pow(h,n)+Math.pow(p,n),1/n)}},n.linear=function(n){return n},n.map=function(n){return function(t){return Array.prototype.map.call(t,n)}},n.mapFilter=function(n,t){return function(r){for(var e=[],o=0;o<r.length;o++){var u=n(r[o],o);t(u,e.length)&&e.push(u)}return e}},n.max=b,n.maxNan=w,n.maxVector=function(n){switch(n.length){case 0:return[];case 1:return n[0];default:return n.reduce((function(n,t){return t.map((function(t,r){return n[r]>t?n[r]:t}))}),new Array(n[0].length).fill(-1/0))}},n.mean=function(n){return P(n)/n.length},n.meanNan=function(n){var t=0;return n.reduce((function(n,r){return r||0===r?++t&&n+r:n}),0)/t},n.meanVector=function(n){switch(n.length){case 0:return[];case 1:return n[0];default:return n.reduce((function(t,r){return r.map((function(r,e){return t[e]+r/n.length}))}),new Array(n[0].length).fill(0))}},n.median=A,n.medianVector=M,n.mergeMaps=function(n,t){return new Map(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(n,"t0",1);case 1:return r.delegateYield(t,"t1",2);case 2:case"end":return r.stop()}}),r)}))())},n.min=O,n.minNan=j,n.minVector=function(n){switch(n.length){case 0:return[];case 1:return n[0];default:return n.reduce((function(n,t){return t.map((function(t,r){return n[r]<t?n[r]:t}))}),new Array(n[0].length).fill(1/0))}},n.mod=function(n,t){return(n%t+n)%t},n.nextAnimationFrame=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){var r=0;!function e(){return requestAnimationFrame((function(){++r<n?e():t()}))}()}))},n.normalize=x,n.nthIndexOf=function(n,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=0,o=n.indexOf(t);e<r&&o>=0;)o=n.indexOf(t,o+1),e++;return o},n.pipe=function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return(function(n){return t.reduce((function(n,t){return t(n)}),n)})},n.quadIn=function(n){return n*n},n.quadInOut=function(n){return n<.5?2*n*n:(4-2*n)*n-1},n.quadOut=function(n){return n*(2-n)},n.quartIn=function(n){return n*n*n*n},n.quartInOut=function(n){return n<.5?8*n*n*n*n:1-8*--n*n*n*n},n.quartOut=function(n){return 1- --n*n*n*n},n.quintIn=function(n){return n*n*n*n*n},n.quintInOut=function(n){return n<.5?16*n*n*n*n*n:1+16*--n*n*n*n*n},n.quintOut=function(n){return 1+--n*n*n*n*n},n.randomString=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"abcdefghijklmnopqrstuvwxyz";return Array(n).join().split(",").map((function(){return t.charAt(Math.floor(Math.random()*t.length))})).join("")},n.range=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Array(Math.ceil((t-n)/r)).fill().map((function(t,e){return n+e*r}))},n.removeAllChildren=function(n){for(;n.firstChild;)n.removeChild(n.firstChild)},n.removeClass=function(n,t){var r=new RegExp("(\\s|^)".concat(t,"(\\s|$)"));if(n.namespaceURI===I){var e=n.getAttribute("class")||"";n.setAttribute("class",e.replace(r," "))}else n.classList?n.classList.remove(t):C(n,t)&&(n.className=n.className.replace(r," "))},n.removeLastChild=function(n){n.removeChild(n.lastChild)},n.rgbStrToDec=function(n){return N(n).slice(0,3).map((function(n,t){return+n<<8*(2-t)})).reduce((function(n,t){return t+n}),0)},n.rgbStrToRgbArray=N,n.rgbToHex=function(n,t,r){var e=function(n){var t=n.toString(16);return 1===t.length?"0".concat(t):t};return"#".concat(e(n)).concat(e(t)).concat(e(r))},n.rgbaStrToRgbaArray=D,n.some=function(n){return function(t){return Array.prototype.some.call(t,n)}},n.sortAsc=U,n.sortDesc=function(n,t){return t-n},n.sortPos=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getter,e=void 0===r?c:r,o=t.comparator,i=void 0===o?U:o,a=t.ignoreNull,f=void 0!==a&&a;return Object.entries(n).map(f?function(n){var t=u(n,2),r=t[0],o=t[1];return null===e(o)?void 0:[r,e(o)]}:function(n){var t=u(n,2),r=t[0],o=t[1];return[r,e(o)]}).sort((function(n,t){return i(n[1],t[1])})).reduce((function(n,t,r){return t?(n[t[0]]=r,n):n}),new n.constructor)},n.sum=P,n.sumNan=R,n.sumVector=function(n){switch(n.length){case 0:return[];case 1:return n[0];default:return n.reduce((function(n,t){return t.map((function(t,r){return n[r]+t}))}),new Array(n[0].length).fill(0))}},n.throttle=function(n,t){var r=!1,e=function(){r||(n.apply(void 0,arguments),r=!0,setTimeout((function(){r=!1}),t))};return e.reset=function(){r=!1},e.now=function(){return n.apply(void 0,arguments)},e},n.throttleAndDebounce=function(n,t){var r,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=0;e=null===e?t:e;var u=function(){for(var t=arguments.length,u=new Array(t),i=0;i<t;i++)u[i]=arguments[i];var c=function(){o>0&&(n.apply(void 0,u),o=0)};clearTimeout(r),r=setTimeout(c,e)},i=!1,c=function(){i?(o++,u.apply(void 0,arguments)):(n.apply(void 0,arguments),u.apply(void 0,arguments),i=!0,o=0,setTimeout((function(){i=!1}),t))};return c.reset=function(){i=!1},c.cancel=function(){clearTimeout(r)},c.now=function(){return n.apply(void 0,arguments)},c},n.toRgbaArray=function(n,t){return v(n)?t&&!d(n)?t(n):n:h(n)?[].concat(i(t?x(n):n),[Math.pow(255,!t)]):s(n)?T(n,t):(console.warn("Only HEX, RGB, and RGBA are handled by this function. Returning white instead."),t?[1,1,1,1]:[255,255,255,255])},n.toVoid=function(){},n.unique=function(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,r=new Set,e=[],o=0;o<n.length;o++){var u=t(n[o]);r.has(u)||(r.add(u),e.push(u))}return e},n.update=function n(t,e){if(null===e||"object"!==r(e))return e;if(e.constructor!==Object&&e.constructor!==Array)return new e.constructor(e);var o=new t.constructor,u=!1;return Object.keys(e).forEach((function(r){var i=Object.getOwnPropertyDescriptor(e,r);void 0===t[r]?void 0===i.value?Object.defineProperty(o,r,i):o[r]=F(void 0,e[r]):o[r]=n(t[r],e[r]),u=u||o[r]!==t[r]})),(u=u||Object.keys(t).filter((function(n){return void 0===e[n]})).length)?o:t},n.version="0.25.0",n.wait=function(n){return new Promise((function(t){return setTimeout(t,n)}))},n.withConstructor=function(n){return function(t){return q({__proto__:{constructor:n}},t)}},n.withForwardedMethod=function(n,t){return function(r){return q(r,o({},n,(function(){for(var n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];return t.apply(this,r)})))}},n.withProperty=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.initialValue,u=void 0===r?void 0:r,i=t.getter,a=t.setter,f=t.cloner,s=void 0===f?c:f,l=t.transformer,d=void 0===l?c:l,p=t.validator,h=void 0===p?function(){return!0}:p;return function(t){var r,c,f=u,l=i?function(){return i()}:function(){return s(f)},p=a?function(n){return a(n)}:function(n){var t=d(n);f=h(t)?t:f};return q(t,(r={},(c={})[n]=c[n]||{},c[n].get=function(){return l()},o(r,"set".concat(L(n)),(function(n){p(n)})),e(r,c),r))}},n.withReadOnlyProperty=function(n,t){return function(r){var o,u;return q(r,(o={},(u={})[n]=u[n]||{},u[n].get=function(){return t()},e(o,u),o))}},n.withStaticProperty=function(n,t){return function(r){var o,u;return q(r,(o={},(u={})[n]=u[n]||{},u[n].get=function(){return t},e(o,u),o))}},Object.defineProperty(n,"__esModule",{value:!0})}));
